<!DOCTYPE html>
<html>
<head>
    <title>Current City Weather</title>
    <script>
        var previousPosition = null;

        function showPosition(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            var speed = null;

            if (previousPosition) {
                var previousLatitude = previousPosition.coords.latitude;
                var previousLongitude = previousPosition.coords.longitude;
                var distance = getDistance(latitude, longitude, previousLatitude, previousLongitude);
                var timeDifference = position.timestamp - previousPosition.timestamp;

                speed = calculateSpeed(distance, timeDifference);
            }

            document.getElementById("location").innerHTML = "Latitude: " + latitude + "<br>Longitude: " + longitude;
            document.getElementById("speed").innerHTML = speed !== null ? "Speed: " + speed.toFixed(2) + " meters per second" : "Speed: N/A";

            previousPosition = position;
        }

        function showError(error) {
            document.getElementById("location").innerHTML = "Error: " + error.message;
        }

        function updateLocation() {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        }

        setInterval(updateLocation, 60000); // update location every 1 minute (60 seconds)

        function getDistance(lat1, lon1, lat2, lon2) {
            var R = 6371; // Radius of the Earth in km
            var dLat = toRadians(lat2 - lat1);
            var dLon = toRadians(lon2 - lon1);
            var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                    Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) *
                    Math.sin(dLon / 2) * Math.sin(dLon / 2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            var distance = R * c * 1000; // Convert to meters
            return distance;
        }

        function toRadians(degrees) {
            return degrees * Math.PI / 180;
        }

        function calculateSpeed(distance, time) {
            var speed = distance / time; // Speed in meters per millisecond
            return speed * 1000; // Convert to meters per second
        }

        function handleMotion(event) {
            // Handle device motion events here
        }

        window.addEventListener('devicemotion', handleMotion, true);
    </script>
</head>
<body>
    <h1>Current City Weather</h1>
    <p id="location">Locating...</p>
    <p id="speed">Speed: N/A</p>
</body>
</html>
