<!DOCTYPE html>
<html>
<head>
  <title>Yearly Calendar with Week Numbers</title>
  <style>
    table {
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid black;
      padding: 5px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Yearly Calendar with Week Numbers</h1>

  <form action="" method="get">
    <label for="year">Select Year:</label>
    <input type="number" id="year" name="year" value="<?php echo isset($_GET['year']) ? $_GET['year'] : date('Y'); ?>">
    <input type="submit" value="Go">
  </form>

  <?php
    $year = isset($_GET['year']) ? $_GET['year'] : date('Y');
    $week = 1;
    $date = new DateTime();

    // Loop through each month of the year
    for ($month = 1; $month <= 12; $month++) {
      $date->setDate($year, $month, 1);
      $monthName = $date->format('F');
      $daysInMonth = $date->format('t');
  ?>

      <h2><?php echo $monthName; ?></h2>

      <table>
        <thead>
          <tr>
            <th>Week</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
            <th>Sun</th>
          </tr>
        </thead>
        <tbody>
          <?php
            // Loop through each week of the month
            while ($week <= 52) {
              echo '<tr>';
              echo '<td>' . $week . '</td>';

              // Loop through each day of the week
              for ($day = 1; $day <= 7; $day++) {
                if ($week == 1 && $day < $date->format('N')) {
                  echo '<td></td>'; // Empty cell for days before the first of the month
                } else {
                  $formattedDate = $date->setISODate($year, $week, $day)->format('Y-m-d');
                  $dayNumber = date('d', strtotime($formattedDate));
                  if ($dayNumber > $daysInMonth) {
                    echo '<td></td>'; // Empty cell for days after the last day of the month
                  } else {
                    echo '<td>' . $dayNumber . '</td>';
                  }
                }
              }

              echo '</tr>';
              $week++;
            }
          ?>
        </tbody>
      </table>

  <?php
    }
  ?>

</body>
</html>
