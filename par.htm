<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Population Representation for Olympic Medals</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .flag-icon { width: 30px; height: 20px; margin-right: 10px; }
        th { cursor: pointer; }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1>Paris(2024) Olympic Medals: An Alternative Way to View the Data</h1>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Country</th>
                    <th>Gold</th>
                    <th>Silver</th>
                    <th>Bronze</th>
                    <th>Total</th>
                    <th>Population</th>
                    <th id="popMedalHeader">Pop/Medal Ratio</th>
                    <th id="popGoldHeader">Pop/Gold Ratio</th>
                </tr>
            </thead>
            <tbody id="medalTableBody"></tbody>
        </table>
    </div>

    <script>
    const data = [
        ["United States", 40, 44, 42, 126, 331002651],
        ["China", 40, 27, 24, 91, 1439323776],
        // ... (rest of the data)
    ];

    const countryCodes = {
        "Albania": "AL", "Algeria": "DZ", "Argentina": "AR",
        // ... (rest of the country codes)
    };

    let sortDirection = 1;

    function getCountryCode(countryName) {
        return countryCodes[countryName] || "UN";
    }

    function populateTable() {
        const tableBody = document.getElementById("medalTableBody");
        const fragment = document.createDocumentFragment();
        
        data.forEach((row, index) => {
            const [country, gold, silver, bronze, total, population] = row;
            const popMedalRatio = population / total;
            const popGoldRatio = gold > 0 ? population / gold : Infinity;
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${index + 1}</td>
                <td>
                    <img src="https://flagcdn.com/h24/${getCountryCode(country).toLowerCase()}.png" alt="${country} flag" class="flag-icon">
                    ${country}
                </td>
                <td>${gold}</td>
                <td>${silver}</td>
                <td>${bronze}</td>
                <td>${total}</td>
                <td>${population.toLocaleString()}</td>
                <td>${Math.round(popMedalRatio).toLocaleString()}</td>
                <td>${Math.round(popGoldRatio).toLocaleString()}</td>
            `;
            fragment.appendChild(tr);
        });
        
        tableBody.innerHTML = "";
        tableBody.appendChild(fragment);
    }

    function sortTable(columnIndex) {
        data.sort((a, b) => {
            const valueA = columnIndex === 7 ? a[5] / a[4] : (a[1] > 0 ? a[5] / a[1] : Infinity);
            const valueB = columnIndex === 7 ? b[5] / b[4] : (b[1] > 0 ? b[5] / b[1] : Infinity);
            return (valueA - valueB) * sortDirection;
        });
        sortDirection *= -1;
        populateTable();
    }

    document.getElementById("popMedalHeader").addEventListener("click", () => sortTable(7));
    document.getElementById("popGoldHeader").addEventListener("click", () => sortTable(8));

    populateTable();
    sortTable(7); // Default sort by Pop/Medal Ratio
    </script>
</body>
</html>
